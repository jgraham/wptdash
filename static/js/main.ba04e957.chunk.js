(this.webpackJsonpwptdash=this.webpackJsonpwptdash||[]).push([[0],[,,,,,function(e,t,s){e.exports=s(12)},,,,,function(e,t,s){},function(e,t,s){},function(e,t,s){"use strict";s.r(t);var a=s(0),n=s.n(a),r=s(4),l=s.n(r),i=(s(10),s(2)),o=s(1);s(11);class h extends a.Component{constructor(e){super(e),this.handleChange=e=>{this.setState({checked:!!e.target.checked}),this.props.onCheckboxChange(this.props.value,e.target.checked)},this.state={checked:this.props.checked}}render(){return n.a.createElement("input",{name:this.props.name,type:"checkbox",checked:this.state.checked,onChange:this.handleChange})}}class p extends a.Component{constructor(...e){super(...e),this.handleChange=e=>{let t=e.target.value;this.props.onChange(t)}}render(){return n.a.createElement("input",{name:this.props.name,onChange:this.handleChange,defaultValue:this.props.defaultValue,list:this.props.list})}}class c extends a.Component{constructor(...e){super(...e),this.handleChange=e=>{this.props.onChange(e.target.value)}}render(){let e=this.props.options.map(e=>n.a.createElement("option",{value:e.value,key:e.value},e.name));return n.a.createElement("select",{onChange:this.handleChange,value:this.props.value},e)}}class u extends a.Component{constructor(...e){super(...e),this.handleChange=e=>{let t=e.target.selectedOptions;this.props.onChange([].map.call(t,e=>e.value))}}render(){let e=this.props.options.map(e=>n.a.createElement("option",{value:e.value,key:e.value,selected:e.selected},e.name));return n.a.createElement("select",{size:"3",multiple:!0,onChange:this.handleChange},e)}}a.Component;const d=new class{constructor(){this.url=new URL(window.location),this.params=this.url.searchParams}_update(){window.history.replaceState({},document.title,this.url.href)}get(e){return this.params.get(e)}has(e){return this.params.has(e)}set(e,t){this.params.set(e,t),this._update()}delete(e){this.params.delete(e),this._update()}append(e,t){this.params.append(e,t),this._update()}};class m extends Error{}let f={and:e=>{if(!Array.isArray(e))throw new m("Argument to 'and' clause must be an array");let t=[];for(let s of e)t.push(w(s));return g.and(...t)},or:e=>{if(!Array.isArray(e))throw new m("Argument to 'or' clause must be an array");let t=[];for(let s of e)t.push(w(s));return g.or(...t)},"==":e=>g["=="](e),not:([e])=>g.not(w(e)),in:e=>g.in(e),has:([e])=>{if("string"!==typeof e)throw new m("Argument to 'has' clause must be a string");return g.has(e)}},g={and:(...e)=>t=>e.every(e=>e(t)),or:(...e)=>t=>e.some(e=>e(t)),"==":([e,t])=>e===t,not:e=>t=>!e(t),in:([e,t])=>s=>{let a=E(s,t);if("string"!==typeof a)throw new m;return a.includes(e)},has:e=>t=>void 0!==E(t,e)};function E(e,t){let s=t.split("."),a=e;for(let n of s)if(a=a instanceof Map?a.get(n):a[n],void 0===a)return;return a}function w(e){let t=Object.keys(e);if(1!==t.length)throw console.error(e),new m("Can't handle an input with multiple keys");let s=t[0];if(!f.hasOwnProperty(s))throw console.error(e),new m(`Unknown operator ${s}`);return f[s](e[s])}class b extends Error{}const C=new Set(["==","!=","in","and","or","!","not",":","has"]),y=new Set(["!","not","has"]),k=[[":"],["in","==","!=","has"],["not","!"],["and"],["or"]],v=new Map;for(let De of k.map((e,t)=>[t,e])){var M=Object(o.a)(De,2);let e=M[0],t=M[1];for(let s of t)v.set(s,k.length-e)}const S=new Map(Object.entries({"!":"not"})),x=new Map(Object.entries({test:"in"}));class D{constructor(e){this.name=e}to_object(){let e={};return e[this.name]=this.children().map(e=>e.to_object()),e}}class j extends D{constructor(e){if(!C.has(e)||!y.has(e))throw new Error;S.has(e)&&(e=S.get(e)),super(e),this.operand=null}children(){return[this.operand]}}class O extends D{constructor(e){if(!C.has(e)||y.has(e))throw new Error;S.has(e)&&(e=S.get(e)),super(e),this.lhs=null,this.rhs=null}children(){return[this.lhs,this.rhs]}}class I extends D{constructor(e){"'"!==e[0]&&'"'!==e[0]||(e=e.slice(1,e.length-1)),super(e)}to_object(){return this.name}}function _(e){return y.has(e)?new j(e):new O(e)}class P{constructor(){this.operators=[],this.operands=[]}top(){return this.operators.length?this.operators[this.operators.length-1]:null}parse(e){for(let t of e)if("("===t)this.operators.push(t);else if(")"===t){for(;null!==this.top()&&"("!==this.top();)this.apply();if(!this.operators.length)throw new b("Mismatched parens");this.operators.pop()}else if(C.has(t)){for(;null!==this.top()&&")"!==this.top()&&this.precedence(this.top().name)>=this.precedence(t);)this.apply();this.operators.push(_(t))}else this.operands.push(new I(t));for(;this.operators.length;)this.apply();if(1!==this.operands.length)throw new b("Operands remaining at end of input");return this.operands[0]}precedence(e){return v.get(e)}apply(){let e=this.operators.pop();if(y.has(e.name)){let t=this.operands.pop();if(!t)throw new Error;e.operand=t}else{let t=this.operands.pop(),s=this.operands.pop();if(!s||!t)throw new Error;e.lhs=s,e.rhs=t,":"===e.name&&(e=function(e){let t="==";if(x.has(e.lhs.name)&&(t=x.get(e.lhs.name)),e.name=t,"in"===t){var s=[e.rhs,e.lhs];e.lhs=s[0],e.rhs=s[1]}return e}(e))}this.operands.push(e)}}function T(e){return(new P).parse(function*(e){let t=/\s*/,s=/\w(?:\w|\d|\.|_|-|\+|\/)*|\d+|==|!=|\(|\)|:|".*?[^\\]"|'.*?[^\\]'/,a=e.length;for(;e.length;){let n=e.match(t);if(n[0].length){let t=n[0].length;if(!(e=e.slice(t)).length)break}if(n=e.match(s),!n)throw new b(`Invalid input at character ${a-e.length}`);let r=n[0];yield r,e=e.slice(r.length)}}(e)).to_object()}class $ extends a.Component{constructor(e){super(e),this.types=new Map(Object.entries({none:{name:"None",filter:null},untriaged:{name:"Untriaged",filter:null,queryTerms:[{not:{link:"bugzilla.mozilla.org"}}]},triaged:{name:"Triaged",filter:null,queryTerms:[{link:"bugzilla.mozilla.org"}]},custom:{name:"Custom\u2026",filter:null,queryTerms:[]}})),this.onTypeChange=e=>{this.types.has(e)&&(this.setState({type:e}),this.afterTypeChange(e))},this.onExprChange=e=>{let t;clearTimeout(this.timer);try{t=e?T(e):null}catch(s){return void(this.timer=setTimeout(()=>{console.log(s)},1e3))}this.timer=setTimeout(()=>{let a;try{a=t?w(t):null}catch(s){return void console.error(s)}this.props.onChange(a,[]),this.setState({expr:e})},1e3)};let t="none",s=null,a=d.get("filter");if(a){let e=a.split(":");t=e[0],s=e.slice(1).join(":")}this.types.has(t)||(t="none",s=null),"custom"!==t&&(s=this.types.get(t).filter),this.state={type:t,expr:s},this.afterTypeChange(t),s&&this.onExprChange(s)}componentDidUpdate(e,t){t.type===this.state.type&&t.expr===this.state.expr||this.afterFilterUpdate()}afterTypeChange(e){let t,s,a=[];if("custom"===e)t=this.state.expr;else{let s=this.types.get(e);t=s.filter,a=s.queryTerms||[]}t&&(s=w(T(t))),this.props.onChange(s,a)}afterFilterUpdate(){let e=this.state.type;if("none"===e)d.delete("filter");else if("custom"===e){let e=this.state.expr;d.set("filter",`custom:${e}`)}else d.set("filter",e)}render(){let e=n.a.createElement("p",{className:"note"},"Triaged status is determined by a bugzilla link for the test in the\xa0",n.a.createElement("a",{href:"https://github.com/web-platform-tests/wpt-metadata"},"wpt-metadata")," repository."),t={triaged:e,untriaged:e,custom:n.a.createElement("div",{className:"note"},n.a.createElement("p",null,"Custom filters are boolean expressions with logical operators \xa0",n.a.createElement("code",null,"and"),", ",n.a.createElement("code",null,"or"),", and ",n.a.createElement("code",null,"not"),"`, equality operators ",n.a.createElement("code",null,"=="),", and ",n.a.createElement("code",null,"!="),"and custom operators ",n.a.createElement("code",null,"in")," for text substrings and ",n.a.createElement("code",null,"has")," for testing if a field exists."),n.a.createElement("p",null,"Available fields are ",n.a.createElement("code",null,"test")," for the test title and",n.a.createElement("code",null,"_geckoMetadata")," for fields set from gecko metadata Gecko metadata fields include ",n.a.createElement("code",null,"bug")," and",n.a.createElement("code",null,"lsan-allowed")),n.a.createElement("p",null,"The ",n.a.createElement("code",null,":")," operator performs a default operation depending on the selected field"),n.a.createElement("p",null,"Examples:"),n.a.createElement("ul",null,n.a.createElement("li",null,n.a.createElement("code",null,"historical in test"),' - The test name contains the substring "historical"'),n.a.createElement("li",null,n.a.createElement("code",null,"test:historical"),' - The test name contains the substring "historical"'),n.a.createElement("li",null,n.a.createElement("code",null,"not has _geckoMetadata.bug")," - Gecko metadata doesn't specify a bug field for the test"),n.a.createElement("li",null,n.a.createElement("code",null,"not has _geckoMetadata.bug")," - Gecko metadata doesn't specify a bug field for the test")))},s=Array.from(this.types).map(([e,{name:t}])=>({value:e,name:t}));return[n.a.createElement("dt",{key:"term"},"Filter:"),n.a.createElement("dd",{key:"value"},n.a.createElement(c,{options:s,value:this.state.type,onChange:this.onTypeChange}),"custom"===this.state.type?n.a.createElement(p,{onChange:this.onExprChange,defaultValue:this.state.expr}):null,t.hasOwnProperty(this.state.type)?t[this.state.type]:null)]}}class A extends a.Component{render(){if(!this.props.changes.size)return null;return n.a.createElement("section",{id:"metadata"},n.a.createElement("h3",null,"Metadata Changes"),n.a.createElement("p",null,"Submitting MetaData requires first signing in to ",n.a.createElement("a",{href:"https://staging.wpt.fyi/login",target:"_blank"},"staging.wpt.fyi")),n.a.createElement(L,{changes:this.props.changes,onSubmit:this.props.onSubmit,onCancel:this.props.onCancel}))}}class L extends a.Component{render(){let e=[];for(let s of this.props.changes.entries()){var t=Object(o.a)(s,2);let a=t[0],r=t[1];for(let t of r)e.push(n.a.createElement("li",{key:t.test+t.url},a," | ",t.subtest," | ",t.change," | ",t.url))}return n.a.createElement("div",null,n.a.createElement("details",null,n.a.createElement("summary",null,"Pending Changes"),n.a.createElement("ol",null,e)),n.a.createElement("div",null,n.a.createElement("button",{onClick:this.props.onSubmit},"Sumbit Changes"),n.a.createElement("button",{onClick:this.props.onCancel},"Cancel")))}}function R(e,t){return e===t||!(!Array.isArray(e)||!Array.isArray(t))&&(e.length===t.length&&e.every((e,s)=>e===t[s]))}function N(e,t){if(e.size!==t.size)return!1;for(let s of e)if(!t.has(s))return!1;return!0}function*z(e,t){let s=Array.from(e.keys());s.sort();for(let a of s)yield[a,e.get(a)]}function*G(e){let t=0;for(let s of e)yield[t,s],t++}class U extends a.Component{constructor(...e){super(...e),this.onDismiss=e=>{this.props.onDismissNotification(e)}}render(){if(!this.props.entries.length)return null;let e=[];for(let s of G(this.props.entries)){var t=Object(o.a)(s,2);let a=t[0],r=t[1];e.push(n.a.createElement(B,{key:`notification-${r.id}`,id:r.id,level:r.level,content:r.content,options:r.options,onDismiss:()=>this.onDismiss(a)}))}return n.a.createElement("ul",{className:"notifications"},e)}}class B extends a.Component{constructor(e){super(e),this.onDismiss=()=>{this.timer&&(clearTimeout(this.timer),this.timer=null),this.props.onDismiss(this.props.id)},this.timer=null}render(){let e=[];if(this.props.options.retry){let t=()=>{this.props.onDismiss(this.props.id),this.props.options.retry()};e.push(n.a.createElement("button",{onClick:t,key:"retry"},"Retry"))}return this.props.options.timeout&&(this.timer=setTimeout(this.onDismiss,this.props.options.timeout)),n.a.createElement("li",{className:this.props.level},this.props.content,n.a.createElement("button",{onClick:this.onDismiss},"Close"),e)}}const F="https://firefox-ci-tc.services.mozilla.com/api/queue/v1",q=new Set(["PASS","OK"]),V=["chrome","firefox","safari"],W=Object.freeze({NONE:0,LOADING:1,COMPLETE:2}),H=/https?:\/\/bugzilla\.mozilla\.org\/show_bug\.cgi\?id=(\d+)/;function J(e,t={},s=!1){let a=new URL(`${s?"https://staging.wpt.fyi":"https://wpt.fyi"}/${e}`),n=[["label","master"],["product","chrome[experimental]"],["product","firefox[experimental]"],["product","safari[experimental]"]];t=new Map(Object.entries(t));for(let i of n){var r=Object(o.a)(i,2);let e=r[0],s=r[1];t.has(e)||a.searchParams.append(e,s)}for(let i of t){var l=Object(o.a)(i,2);let e=l[0],t=l[1];null!==t&&void 0!==t&&(Array.isArray(t)?t.forEach(t=>a.searchParams.append(e,t)):a.searchParams.append(e,t))}return a}function Q(e){return e?e&&e[0].toUpperCase()+e.slice(1):""}class K extends Error{constructor(e,t=null){t||(t=`Fetch for ${e.url} returned status ${e.status} ${e.statusText}`),super(t),this.resp=e,this.name="FetchError"}}async function X(e,t){let s=await fetch(e,t);if(!s.ok)throw new K(s);return await s.json()}const Y=/^(.*\.any)(:?\..*)\.html$/,Z=/^(.*\.(:?worker|window))\.html$/;function ee(e){let t=new URL(`https://web-platform.test${e}`).pathname,s=Y.exec(t);return null===s&&(s=Z.exec(t)),null!==s&&(t=s[1]+".js"),t}let te=(()=>{let e=-1;return(t,s,a)=>(e++,{id:e,level:t,content:s,options:a})})();class se extends a.Component{constructor(e){super(e),this.onError=(e,t={})=>{let s=e.message||"Unknown Error";this.notify("error",s,t)},this.onDismissNotification=e=>{let t=Array.from(this.state.notifications),s=t.findIndex(t=>t.id===e);void 0!==s&&(t.splice(s,1),this.setState({notifications:t}))},this.onFilterChange=(e,t)=>{this.setState({filterFunc:e,queryTerms:t})},this.onRunChange=e=>{this.setState({runSha:e})},this.onMetadataPendingSubmit=async()=>{let e=(e,t)=>"firefox"===e.product&&e.url===t.url&&e.subtest===t.subtest&&e.status===t.status;console.log(this.state.metadataPendingChanges);let t={};for(let n of this.state.metadataPendingChanges){var s=Object(o.a)(n,2);let a=s[0],r=s[1],l=[],h=this.state.wptMetadata[a];if(h)for(let e of h)if(e.results)for(let t of e.results)l.push(Object(i.a)({},e,{},t));else l.push(Object(i.a)({},e));for(let t of r)if("REMOVE"===t.change)l=l.filter(s=>!e(s,t));else if("ADD"===t.change&&!l.some(s=>e(s,t))){let e={product:"firefox",url:t.url};t.subtest&&(e.subtest=t.subtest),t.status&&(e.status=t.status),l.push(e)}console.log("meta",l),t[a]=[];let p=new Map;for(let e of l){let s=[e.product,e.url].join(",");if(p.has(s)||(p.set(s,t[a].length),t[a].push({product:e.product,url:e.url})),e.subtest||e.status){let n=t[a][p.get(s)];n.results||(n.results=[]);let r={};e.subtest&&(r.subtest={}),e.status&&(r.status=e.status),n.results.push(r)}}}let a=await this.patchMetadata(t);this.notify("info",n.a.createElement("span",null,"Opened PR ",n.a.createElement("a",{href:a},a)),{timeout:6e4}),this.setState({metadataPendingChanges:new Map})},this.onMetadataPendingCancel=()=>{this.setState({metadataPendingChanges:new Map})},this.onMetadataChange=e=>{console.log("onMetadataChange",e);let t=new Map(this.state.metadataPendingChanges);t.has(e.test)||t.set(e.test,[]),t.get(e.test).push(e),this.setState({metadataPendingChanges:t})},this.onComponentChange=e=>{let t=e.toLowerCase(),s=new Set(this.state.bugComponentsMap.get(t));d.set("bugComponent",e),d.delete("paths"),this.setState({currentBugComponent:t,selectedPaths:s})},this.onPathsChange=e=>{let t=Array.from(e);t.sort(),R(t,this.state.bugComponentsMap.get(this.state.currentBugComponent))?d.delete("paths"):d.set("paths",t.join(",")),this.setState({selectedPaths:e})},this.state={bugComponents:[],bugComponentsMap:new Map,currentBugComponent:null,selectedPaths:new Set,runSha:null,wptRuns:null,wptMetadata:null,geckoMetadata:{},pathGeckoMetadata:{},notifications:[],haveData:{bugComponent:!1,geckoMetadata:!1,wptMetadata:!1,wptRun:!1},filter:null,filterFunc:null,queryTerms:[],metadataPendingChanges:new Map}}notify(e,t,s={}){let a=te(e,t,s);this.setState(e=>({notifications:e.notifications.concat(a)}))}async patchMetadata(e){let t=JSON.stringify(e);if("jgraham.github.io"!==window.location.hostname)return this.onError(new Error(`Unable to submit data from ${window.location.hostname}`),{}),console.error(e),null;let s=J("api/metadata/triage",{product:"firefox"},!0);return(await fetch(s,{method:"PATCH",mode:"cors",cache:"no-cache",credentials:"include",headers:{"Content-Type":"application/json"},body:t})).text()}async fetchData(e,t,s={}){s.hasOwnProperty("redirect")||(s.redirect="follow");try{return await X(e,s)}catch(a){throw this.onError(a,{retry:t}),a}}async loadTaskClusterData(e,t){let s,a=async()=>await this.loadTaskClusterData(e,t),n=(await this.fetchData(`https://firefox-ci-tc.services.mozilla.com/api/index/v1/task/${e}`,a)).taskId,r=await this.fetchData(`${F}/task/${n}/status`,a);for(let i of function*(e){let t=e.length;for(;t>0;)t--,yield e[t]}(r.status.runs))if("completed"===i.state){s=i.runId;break}let l=(await this.fetchData(`${F}/task/${n}/runs/${s}/artifacts`,a)).artifacts.find(e=>e.name.endsWith(t));return this.fetchData(`${F}/task/${n}/runs/${s}/artifacts/${l.name}`,a)}async loadBugComponentData(){this.setState({haveData:Object(i.a)({},this.state.haveData,{bugComponent:!1})});let e=await this.loadTaskClusterData("gecko.v2.mozilla-central.latest.source.source-bugzilla-info","components-normalized.json"),t=this.processComponentData(e),s=Object(o.a)(t,2),a=s[0],n=s[1];a=Array.from(a).sort(),a.push("Any"),this.setState({bugComponentsMap:n,bugComponents:a});let r=this.state.currentBugComponent;if(!r&&d.has("bugComponent")){let e=d.get("bugComponent");n.has(e)&&(r=e)}r||(r=a[0].toLowerCase());let l=new Set(n.get(r));if(d.has("paths")){let e=new Set(d.get("paths").split(","));l=new Set(Array.from(l).filter(t=>e.has(t)))}this.setState({selectedPaths:l,currentBugComponent:r}),this.setState({haveData:Object(i.a)({},this.state.haveData,{bugComponent:!0})})}async loadWptRunData(){this.setState({haveData:Object(i.a)({},this.state.haveData,{wptRun:!1})});let e={aligned:""};this.state.runSha&&(e.sha=this.state.runSha);let t=J("api/runs",e),s=await this.fetchData(t,async()=>this.loadWptRunData()),a=s[0].full_revision_hash;this.setState({wptRuns:s,runSha:a}),this.setState({haveData:Object(i.a)({},this.state.haveData,{wptRun:!0})})}async loadWptMetadata(){this.setState({haveData:Object(i.a)({},this.state.haveData,{wptMetadata:!1})});let e=J("api/metadata",{product:["firefox"]}),t=await this.fetchData(e,async()=>this.loadWptMetadata());this.setState({wptMetadata:t}),this.setState({haveData:Object(i.a)({},this.state.haveData,{wptMetadata:!0})})}async loadGeckoMetadata(){this.setState({haveData:Object(i.a)({},this.state.haveData,{geckoMetadata:!1})});let e=await this.loadTaskClusterData("gecko.v2.mozilla-central.latest.source.source-wpt-metadata-summary","summary.json");this.setState({geckoMetadata:e}),this.setState({haveData:Object(i.a)({},this.state.haveData,{geckoMetadata:!0})})}async componentDidMount(){await Promise.all([this.loadBugComponentData(),this.loadWptRunData(),this.loadWptMetadata(),this.loadGeckoMetadata()])}filterGeckoMetadata(){if(!this.state.selectedPaths.size||!Object.keys(this.state.geckoMetadata).length)return;function e(e){return e.length?new RegExp(`^(?:${e.join("|")})(?:$|/)`):null}let t=e(Array.from(this.state.selectedPaths).map(e=>e.slice(1))),s=[];for(let l of this.state.bugComponentsMap.values())!this.state.selectedPaths.has(l)&&t.test(l.slice(1))&&s.push(l);let a=e(s),n={},r=this.state.geckoMetadata;for(let l of Object.keys(r))!t.test(l)||null!==a&&a.test(l)||(n[l]=r[l]);this.setState({pathGeckoMetadata:n})}processComponentData(e){let t=e.components,s=e.paths,a=new Map,n=new Map,r="testing/web-platform/tests",l=[[r,s.testing["web-platform"].tests]],i=/(.*)\/[^/]*$/,h=[];for(n.set("any",[]);l.length;){let e=l.pop(),s=Object(o.a)(e,2),p=s[0],c=s[1],u=!1;for(let o of Object.keys(c)){let e=c[o];if("object"===typeof e){let t=`${p}/${o}`;l.push([t,e])}else{if(u||p===r)continue;let s=p,l=t[e].join("::"),o=l.toLowerCase();for(;s!==r;){if(a.has(s)&&a.get(s)===o){u=!0;break}s=i.exec(s)[1]}if(!u){a.set(p,o),n.has(o)||(n.set(o,[]),h.push(l));let e=p.slice(r.length);n.get(o).push(e),n.get("any").push(e),u=!0}}}}return[h,n]}async componentDidUpdate(e,t){t.geckoMetadata===this.state.geckoMetadata&&R(t.selectedPaths,this.state.selectedPaths)||this.filterGeckoMetadata(),t.runSha!==this.state.runSha&&await this.loadWptRunData()}render(){let e=this.state.bugComponentsMap.get(this.state.currentBugComponent),t=[];return this.state.runSha&&t.push(n.a.createElement("section",{id:"selector",key:"selector"},n.a.createElement("dl",null,n.a.createElement(ae,{runSha:this.state.runSha,onChange:this.onRunChange}),n.a.createElement(ne,{runs:this.state.wptRuns}),n.a.createElement(re,{onComponentChange:this.onComponentChange,components:this.state.bugComponents,value:this.state.currentBugComponent}),n.a.createElement($,{onChange:this.onFilterChange}),n.a.createElement(le,{paths:e,selectedPaths:this.state.selectedPaths,onChange:this.onPathsChange})))),Object.values(this.state.haveData).includes(!1)?t.push(n.a.createElement("section",{id:"details",key:"details"},n.a.createElement("p",null,"Loading\u2026"))):t.push(n.a.createElement("section",{id:"details",key:"details"},n.a.createElement(Me,null,n.a.createElement(ie,{label:"Interop Comparison",runs:this.state.wptRuns,paths:this.state.selectedPaths,geckoMetadata:this.state.pathGeckoMetadata,wptMetadata:this.state.wptMetadata,onError:this.onError,filter:this.state.filterFunc,queryTerms:this.state.queryTerms,onMetadataChange:this.onMetadataChange},n.a.createElement("h2",null,"Interop Comparison")),n.a.createElement(we,{label:"Gecko Data",data:this.state.pathGeckoMetadata,paths:this.state.selectedPaths,onError:this.onError},n.a.createElement("h2",null,"Gecko metadata"),n.a.createElement("p",null,"Gecko metadata in ",n.a.createElement("code",null,"testing/web-platform/meta")," taken from latest mozilla-central."),n.a.createElement("p",null,"Note: this data is currently not kept up to date"))),n.a.createElement(A,{changes:this.state.metadataPendingChanges,onSubmit:this.onMetadataPendingSubmit,onCancel:this.onMetadataPendingCancel}))),n.a.createElement("div",{id:"app"},n.a.createElement(U,{entries:this.state.notifications,onDismissNotification:this.onDismissNotification}),n.a.createElement("header",null,n.a.createElement("h1",null,"wpt interop dashboard")),t)}}class ae extends a.Component{constructor(e){super(e),this.onInputChange=e=>{this.setState({newSha:e})},this.onEditClick=()=>{this.setState({editable:!0})},this.onUpdateClick=()=>{this.props.onChange(this.state.newSha),this.setState({editable:!1})},this.state={editable:!1,newSha:null,runShas:[]}}async componentDidMount(){let e=J("/api/runs",{"max-count":"100"}),t=await X(e),s=new Map;for(let n of t)s.has(n.revision)||s.set(n.revision,new Set),s.get(n.revision).add(n.browser_name);let a=[];for(let n of t)s.has(n.revision)&&3===s.get(n.revision).size&&a.push(n.revision),s.delete(n.revision);this.setState({runShas:a})}render(){if(!this.props.runSha&&!this.state.editable)return null;let e=J("",{sha:this.props.runSha});return[n.a.createElement("dt",{key:"term"},"wpt SHA1:"),this.state.editable?n.a.createElement("dd",{key:"value"},this.state.runShas?n.a.createElement("datalist",{id:"runShasData"},this.state.runShas.map(e=>n.a.createElement("option",{key:e,value:e}))):null,n.a.createElement(p,{defaultValue:this.props.runSha,onChange:this.onInputChange,list:"runShasData"}),n.a.createElement("button",{onClick:this.onUpdateClick},"Update")):n.a.createElement("dd",{key:"value"},n.a.createElement("a",{href:e},this.props.runSha.slice(0,12)),"\xa0\xa0",n.a.createElement("button",{onClick:this.onEditClick},"Edit"))]}}class ne extends a.Component{render(){if(!this.props.runs)return null;let e=this.props.runs.map(e=>n.a.createElement("li",{key:e.browser_name},Q(e.browser_name)," ",e.browser_version," (",e.os_name,")"));return[n.a.createElement("dt",{key:"term"},"Browsers:"),n.a.createElement("dd",{key:"value"},n.a.createElement("ul",null,e))]}}class re extends a.Component{constructor(...e){super(...e),this.handleChange=e=>{this.props.onComponentChange(e)}}render(){let e=this.props.components.map(e=>({value:e.toLowerCase(),name:e}));return this.props.value?[n.a.createElement("dt",{key:"term"},"Bug Component:"),n.a.createElement("dd",{key:"value"},n.a.createElement(c,{onChange:this.handleChange,value:this.props.value,options:e}))]:null}}class le extends a.Component{constructor(e){super(e),this.onCheckboxChange=(e,t)=>{let s=new Set(this.state.paths);t?s.add(e):s.delete(e),this.setState({paths:s})},this.onUpdateClick=()=>{this.props.onChange(this.state.paths)},this.state={paths:new Set(this.props.paths)}}componentDidUpdate(e){e.selectedPaths!==this.props.selectedPaths&&this.setState({paths:new Set(this.props.selectedPaths)})}render(){if(!this.props.paths)return null;let e=this.props.paths.sort().map(e=>n.a.createElement("li",{key:e},n.a.createElement("label",null,n.a.createElement(h,{checked:this.props.selectedPaths.has(e),value:e,onCheckboxChange:this.onCheckboxChange}),e)));return[n.a.createElement("dt",{key:"term"},"Test Paths"),n.a.createElement("dd",{key:"value"},n.a.createElement("button",{onClick:this.onUpdateClick,disabled:N(this.state.paths,this.props.selectedPaths)},"Update"),n.a.createElement("ul",{id:"test-paths"},e))]}}class ie extends a.Component{constructor(e){super(e),this.onBrowserChange=(e,t)=>{this.setState({passesIn:e,failsIn:t});for(let a of[["passesIn",e],["failsIn",t]]){var s=Object(o.a)(a,2);let e=s[0],t=s[1];t=t.sort(),R(t,this.defaultBrowsers[e])?d.delete(e):d.set(e,t.join(","))}},this.defaultBrowsers={failsIn:["firefox"],passesIn:["chrome","safari"]};let t=this.getComparison();this.state={loading_state:W.NONE,results:[],filter:null,filteredResults:null,passesIn:t.passesIn,failsIn:t.failsIn}}getComparison(){let e={};for(let s of Object.entries(this.defaultBrowsers)){var t=Object(o.a)(s,2);let a=t[0],n=t[1];e[a]=n.slice()}for(let s of Object.keys(e))if(d.has(s)){let t=d.get(s),a=t.split(",").filter(e=>V.includes(e));t.length&&!a.length||(e[s]=a)}return e}buildQuery(){let e={run_ids:this.props.runs.map(e=>e.id),query:{and:[]}},t=e.query.and;for(let a of this.state.failsIn)for(let e of q)t.push({not:{browser_name:a,status:e}});for(let a of this.state.passesIn){let e;if(q.size>1){let s={or:[]};t.push(s),e=s.or}else e=t;for(let t of q)e.push({browser_name:a,status:t})}let s=Array.from(this.props.paths);s.length>1?t.push({or:s.map(e=>({pattern:e+"/"}))}):t.push({pattern:s[0]});for(let a of this.props.queryTerms)t.push(a);return e}async fetchResults(){let e,t=this.buildQuery();try{e=await X(J("api/search",{}),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})}catch(a){throw this.props.onError(a,{retry:async()=>this.fetchResults()}),this.setState({loading_state:W.COMPLETE}),a}let s=new RegExp(Array.from(this.props.paths).map(e=>`^${e}/`).join("|"));e.results=e.results.filter(e=>s.test(e.test)),e.results.forEach(e=>{e._wptMetadata=this.getWptMetadata(e.test),e._geckoMetadata=this.getGeckoMetadata(e.test)}),this.setState({results:e,loading_state:W.COMPLETE})}getWptMetadata(e){let t=new Map;if(this.props.wptMetadata[e])for(let s of this.props.wptMetadata[e]){let e=Object(i.a)({},s),a=e.product;delete e.product,t.has(a)||t.set(a,[]),t.get(a).push(e)}return t}getGeckoMetadata(e){let t=new Map,s=e.split("/"),a=s[s.length-1];s=s.slice(1,s.length-1);let n="";function r(e){for(let a of Object.entries(e)){var s=Object(o.a)(a,2);let e=s[0],n=s[1];"_"!==e[0]&&t.set(e,n)}}for(let o of s){n.length&&(n+="/"),n+=o;let e=this.props.geckoMetadata[n];e&&r(e)}let l=this.props.geckoMetadata[n];if(l&&l._tests&&l._tests[a]){let e=l._tests[a];if(r(e),e._subtests){t._subtests=new Map;for(let s of Object.entries(e._subtests)){var i=Object(o.a)(s,2);let e=i[0],a=i[1];t._subtests.set(e,new Map(Object.entries(a)))}}}return t}updateFilteredResults(){let e;e=this.state.results?this.props.filter?this.state.results.results.filter(e=>this.props.filter(e)):this.state.results.results:this.state.results,this.setState({filteredResults:e})}render(){let e;if(this.state.loading_state!==W.COMPLETE)e=n.a.createElement("div",null,n.a.createElement("p",null,"Loading\u2026"));else if(null===this.state.results)e=n.a.createElement("div",null,n.a.createElement("p",null,"Load failed"));else if(this.state.results.results.length){let t=this.state.filteredResults?this.state.filteredResults:[],s=t.map(e=>n.a.createElement(pe,{failsIn:this.state.failsIn,passesIn:this.state.passesIn,runs:this.props.runs,result:e,key:e.test,geckoMetadata:e._geckoMetadata||new Map,wptMetadata:e._wptMetadata,onMetadataChange:this.props.onMetadataChange,onError:this.props.onError}));s.sort((e,t)=>e.key>t.key?1:e.key===t.key?0:-1),e=[n.a.createElement("p",{key:"desc"},t.length," top-level tests with \xa0",t.map(e=>e.legacy_status[0].total).reduce((e,t)=>e+t,0)," subtests"),n.a.createElement("ul",{key:"data"},s)]}else e=n.a.createElement("div",null,n.a.createElement("p",null,"No results"));return n.a.createElement("div",null,this.props.children,n.a.createElement(oe,{failsIn:this.state.failsIn,passesIn:this.state.passesIn,onChange:this.onBrowserChange}),e)}async componentDidMount(){await this.fetchIfPossible({},{})}async componentDidUpdate(e,t){await this.fetchIfPossible(e,t),t.filter!==this.state.filter&&this.updateFilteredResults()}async fetchIfPossible(e,t){this.state.loading_state!==W.LOADING&&null!==this.props.runs&&this.props.paths&&(this.state.loading_state===W.COMPLETE&&this.props.paths===e.paths&&this.state.failsIn===t.failsIn&&this.state.passesIn===t.passesIn&&this.props.queryTerms===e.queryTerms||(this.props.paths.size?(this.setState({results:null,loading_state:W.LOADING}),await this.fetchResults(),this.updateFilteredResults()):this.setState({results:{results:[]},loading_state:W.COMPLETE})))}}class oe extends a.Component{constructor(e){super(e),this.onEditClick=()=>{this.setState({editable:!0})},this.onSelectChange=(e,t)=>{let s,a={};"passesIn"===t?s="newPassesIn":"failsIn"===t?s="newFailsIn":console.error(`Unknown key ${t}`),a[s]=e,this.setState(a)},this.onUpdateClick=()=>{this.props.onChange(this.state.newPassesIn,this.state.newFailsIn),this.setState({editable:!1})},this.state={editable:!1,newPassesIn:this.props.passesIn,newFailsIn:this.props.failsIn}}joinList(e){if(!e.length)return"";if(1===e.length)return e[0];return`${e.slice(0,e.length-1).join(", ")}, and ${e[e.length-1]}`}render(){if(this.state.editable){let e=V.map(e=>({value:e,name:Q(e),selected:this.props.passesIn.includes(e)})),t=V.map(e=>({value:e,name:Q(e),selected:this.props.failsIn.includes(e)}));return n.a.createElement("p",null,"Tests that \xa0",n.a.createElement("label",null,"pass in\xa0",n.a.createElement(u,{onChange:e=>this.onSelectChange(e,"passesIn"),options:e})),"\xa0but",n.a.createElement("label",null,"\xa0not in\xa0",n.a.createElement(u,{onChange:e=>this.onSelectChange(e,"failsIn"),options:t})),"\xa0",n.a.createElement("button",{onClick:this.onUpdateClick,disabled:0===this.state.newPassesIn.length&&0===this.state.newFailsIn.length},"Update"))}{let e;return e=this.props.passesIn.length&&this.props.failsIn.length?`Tests that pass in ${this.joinList(this.props.passesIn.map(e=>Q(e)))}\nbut not in ${this.joinList(this.props.failsIn.map(e=>Q(e)))}`:this.props.passesIn.length?`Tests that pass in ${this.joinList(this.props.passesIn.map(e=>Q(e)))}`:`Tests that don't pass in ${this.joinList(this.props.failsIn.map(e=>Q(e)))}`,n.a.createElement("p",null,e,"\xa0",n.a.createElement("button",{onClick:this.onEditClick},"Edit"))}}}class he extends a.Component{constructor(e){super(e),this.handleClick=()=>{this.setState({showDetails:!this.state.showDetails})},this.state={showDetails:!1}}render(){return n.a.createElement("li",{className:"tree-row"+(this.state.showDetails?" tree-row-expanded":"")},n.a.createElement("span",{onClick:this.handleClick},this.state.showDetails?"\u25bc ":"\u25b6 ",this.props.rowTitle),this.props.rowExtra,this.state.showDetails?n.a.createElement("div",{className:"tree-row"},this.props.children):"")}}class pe extends a.Component{render(){let e=`${this.props.result.test} [${this.props.result.legacy_status[0].total} subtests]`;return n.a.createElement(he,{rowTitle:n.a.createElement("code",null,e),rowExtra:null},n.a.createElement(ce,{runs:this.props.runs,test:this.props.result.test,passesIn:this.props.passesIn,failsIn:this.props.failsIn,geckoMetadata:this.props.geckoMetadata,wptMetadata:this.props.wptMetadata,onError:this.props.onError,onMetadataChange:this.props.onMetadataChange}))}}class ce extends a.Component{constructor(e){super(e),this.state={loaded:!1,results:null}}processResultData(e){let t=new Map;for(let l of e){var s=Object(o.a)(l,2);let e=s[0],a=s[1];t.has(null)||t.set(null,new Map),t.get(null).set(e,{status:a.status,message:a.message});for(let s of a.subtests)t.has(s.name)||t.set(s.name,new Map),t.get(s.name).set(e,{status:s.status,message:s.message})}for(let l of t.values())for(let e of this.props.runs){let t=e.browser_name;l.has(t)||l.set(t,{status:"MISSING",message:null})}let a=new Map;for(let l of t){var n=Object(o.a)(l,2);let e=n[0],t=n[1];this.props.passesIn.every(e=>q.has(t.get(e).status))&&this.props.failsIn.every(e=>!q.has(t.get(e).status))&&a.set(e,t)}let r=[];return a.has(null)&&(r.push([null,a.get(null)]),a.delete(null)),r.concat(Array.from(a))}async fetchData(){let e=new Map,t=[],s=[];for(let l of this.props.runs){let e=l.browser_name,a=l.results_url.split("-");a.pop();let n=X(`${a.join("-")}${this.props.test}`).then(e=>({success:!0,value:e})).catch(e=>({success:!1,value:e}));t.push(e),s.push(n)}let a=await Promise.all(s);for(let l of G(a)){var n=Object(o.a)(l,2);let s=n[0],a=n[1];if(a.success){let n=t[s];e.set(n,a.value)}}let r=this.processResultData(e);this.setState({results:r,loaded:!0})}async componentDidMount(){await this.fetchData()}render(){if(!this.state.loaded)return n.a.createElement("p",null,"Loading");let e=this.props.runs.map(e=>n.a.createElement("th",{key:e.browser_name},e.browser_name));e.push(n.a.createElement("th",{key:"metadata"}));let t=this.props.geckoMetadata.get("_subtests")||new Map,s=this.state.results.map(([e,s])=>n.a.createElement(ge,{key:e,runs:this.props.runs,test:this.props.test,subtest:e,results:s,geckoMetadata:t.get(e),wptMetadata:this.props.wptMetadata,onMetadataChange:this.props.onMetadataChange}));return n.a.createElement("div",null,n.a.createElement("section",null,n.a.createElement("ul",{className:"links"},n.a.createElement("li",null,n.a.createElement("a",{href:`http://wpt.live${this.props.test}`},"View Test")),n.a.createElement("li",null,n.a.createElement("a",{href:J(`results/${this.props.test}`)},"All Results")),n.a.createElement("li",null,n.a.createElement("a",{href:`http://searchfox.org/mozilla-central/source/testing/web-platform/meta${ee(this.props.test)}.ini`},"Gecko Metadata")),n.a.createElement("li",null,n.a.createElement(ue,{test:this.props.test,subtest:null,wptMetadata:this.props.wptMetadata,onChange:this.props.onMetadataChange}))),n.a.createElement("table",{className:"results"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null),e)),n.a.createElement("tbody",null,s)),n.a.createElement(me,{test:this.props.test,geckoMetadata:this.props.geckoMetadata})))}}class ue extends a.Component{constructor(e){super(e),this.onInputChange=e=>{this.setState({newLinkValue:e})},this.onAddLink=()=>{let e=`https://bugzilla.mozilla.org/show_bug.cgi?id=${this.state.newLinkValue}`;this.props.onChange({test:this.props.test,subtest:this.props.subtest,change:"ADD",url:e});let t=this.state.testMetadata.concat([{url:e}]);this.setState({addLink:!1,newLinkValue:null,testMetadata:t})},this.onRemoveLink=e=>{this.props.onChange({test:this.props.test,subtest:this.props.subtest,change:"REMOVE",url:e});let t=this.state.testMetadata.filter(t=>t.url!==e);this.setState({testMetadata:t})},this.state={testMetadata:[],addLink:!1,newLinkValue:null}}componentDidMount(){this.filterBugLinks()}render(){let e,t;return e=this.state.testMetadata.length?this.state.testMetadata.map(e=>n.a.createElement(de,{key:e.url,url:e.url,onRemove:this.onRemoveLink})):n.a.createElement("span",null,"None"),t=this.state.addLink?n.a.createElement("div",null,n.a.createElement(p,{onChange:this.onInputChange}),n.a.createElement("button",{onClick:this.onAddLink},"Add"),n.a.createElement("button",{onClick:()=>this.setState({addLink:!1,newLinkValue:null})},"Cancel")):n.a.createElement("button",{onClick:()=>this.setState({addLink:!0})},"+"),n.a.createElement("div",null,"Gecko Bugs: ",e,t)}filterBugLinks(){let e=this.props.wptMetadata.get("firefox");if(!e)return;let t=[];for(let s of e)if(H.exec(s.url))if(s.results){let e=s.results.filter(e=>!e.subtest&&!this.props.subtest||e.subtest===this.props.subtest);e.length&&t.push(Object(i.a)({},s,{results:e}))}else this.props.subtest||t.push(s);this.setState({testMetadata:t})}}class de extends a.Component{render(){return n.a.createElement("span",null,n.a.createElement(ye,{value:this.props.url}),n.a.createElement("button",{onClick:()=>this.props.onRemove(this.props.url)},"-"))}}class me extends a.Component{render(){let e=e=>n.a.createElement(ye,{value:e}),t=[];if(this.props.geckoMetadata){let s=[{name:"disabled",render:e},{name:"bug",render:e},{name:"crash",title:"Crashes",render:e},{name:"intermittent",render:e=>JSON.stringify(e)}];for(let e of s)this.props.geckoMetadata.has(e.name)&&t.push(n.a.createElement(fe,{key:e.name,title:e.title?e.title:Q(e.name),values:this.props.geckoMetadata.get(e.name),render:e.render}))}return 0===t.length?null:n.a.createElement("section",null,n.a.createElement("h3",null,"Gecko Metadata"),n.a.createElement("ul",null,t))}}class fe extends a.Component{render(){return this.props.values?1===this.props.values.length&&null===this.props.values[0][0]?n.a.createElement("li",null,this.props.title,": ",this.props.render(this.props.values[0])):n.a.createElement(Ce,{title:this.props.title,values:this.props.values,render:this.props.render}):null}}class ge extends a.Component{render(){let e=this.props.runs.map(e=>{let t=this.props.results.get(e.browser_name);return n.a.createElement(Ee,{result:t,key:e.browser_name})});return e.push(n.a.createElement("td",{key:"metadata"},n.a.createElement(ue,{test:this.props.test,subtest:this.props.subtest,wptMetadata:this.props.wptMetadata,onChange:this.props.onMetadataChange}),n.a.createElement(me,{geckoMetadata:this.props.geckoMetadata}))),n.a.createElement("tr",null,n.a.createElement("th",null,this.props.subtest?this.props.subtest:"<parent>"),e)}}class Ee extends a.Component{render(){return n.a.createElement("td",{className:`result result-${this.props.result.status.toLowerCase()}`,title:this.props.result.message},this.props.result.status)}}class we extends a.Component{groupData(){let e={unconditional:new Map,conditional:new Map},t={unconditional:new Map,conditional:new Map},s={unconditional:new Map,conditional:new Map},a={unconditional:new Map,conditional:new Map},n=(e,t,s,a)=>{let n;t&&t.length&&(n=1!==t.length||null!==t[0]&&null!==t[0][0]?"conditional":"unconditional",a&&(t=t.map(a)),s[n].set(e,t))};for(let h of Object.entries(this.props.data)){var r=Object(o.a)(h,2);let p=r[0],c=r[1];if(n(p,c.disabled,e),n(p,c["lsan-allowed"],s),n(p,c.expected_CRASH,a,e=>[e,null]),c._tests)for(let s of Object.entries(c._tests)){var l=Object(o.a)(s,2);let r=l[0],h=l[1],c=`${p}/${r}`;if(n(c,h.disabled,e),n(c,h.intermittent,t),n(c,h.expected_CRASH,a,e=>[e,null]),h._subtests)for(let s of Object.entries(h._subtests)){var i=Object(o.a)(s,2);let l=i[0],h=i[1],c=`${p}/${r} | ${l}`;n(c,h.disabled,e),n(c,h.intermittent,t),n(c,h.expected_CRASH,a,e=>[e,null])}}}return{disabled:e,intermittent:t,lsan:s,crashes:a}}render(){if(!this.props.data)return n.a.createElement("p",null,"Loading");let e=this.groupData();return null!==e&&Object.values(e).some(e=>Object.values(e).some(e=>e.size>0))?n.a.createElement("section",null,n.a.createElement("h2",null,"Gecko metadata"),n.a.createElement(be,{key:"crashes",data:e.crashes,render:e=>null,title:"Crashes",desc:"tests crash"}),n.a.createElement(be,{key:"disabled",data:e.disabled,render:e=>n.a.createElement(ye,{value:e}),title:"Disabled",desc:"tests are disabled"}),n.a.createElement(be,{key:"intermittent",data:e.intermittent,render:e=>n.a.createElement(ve,{value:e}),title:"Intermittent",desc:"tests are intermittent"}),n.a.createElement(be,{key:"lsan",data:e.lsan,render:e=>n.a.createElement(ke,{value:e}),title:"LSAN Failures",desc:"directories have LSAN failures"})):n.a.createElement("section",null,n.a.createElement("h2",null,"Gecko metadata"),n.a.createElement("p",null,"None"))}}class be extends a.Component{render(){let e=this.props.data,t=e.conditional,s=e.unconditional;if(!t.size&&!s.size)return null;let a=0,r=[];for(let h of[["In all configurations",s],["In some configurations",t]]){var l=Object(o.a)(h,2);let e=l[0],t=l[1];if(t.size){r.push(n.a.createElement("h4",{key:e},e));for(let e of z(t)){var i=Object(o.a)(e,2);let t=i[0],s=i[1];a++,r.push(n.a.createElement(Ce,{key:t,title:t,values:s,render:this.props.render}))}}}return n.a.createElement("section",null,n.a.createElement("h3",null,this.props.title),n.a.createElement("p",null,a," ",this.props.desc),n.a.createElement("ul",null,r))}}class Ce extends a.Component{render(){let e=[];for(let a of this.props.values){var t=Object(o.a)(a,2);let s=t[0],r=t[1],l=s?`if ${s}${r?": ":" "}`:"";e.push(n.a.createElement("li",{key:s||"None"},n.a.createElement("code",null,l),r?this.props.render(r):null))}let s=null;return e.length&&(s=n.a.createElement("ul",{className:"tree-row"},e)),n.a.createElement(he,{rowTitle:this.props.title,rowExtra:null},s)}}class ye extends a.Component{render(){const e=/(?:bug\s+)?(\d+)/i;for(let t of[H,e]){let e=t.exec(this.props.value);if(null!==e)return n.a.createElement("a",{href:`https://bugzilla.mozilla.org/show_bug.cgi?id=${e[1]}`},"Bug ",e[1])}return this.props.value}}class ke extends a.Component{render(){if(Array.isArray(this.props.value)){let e=this.props.value.map(e=>n.a.createElement("li",{key:e},n.a.createElement("code",null,e)));return n.a.createElement("ul",null,e)}return this.props.value}}class ve extends a.Component{render(){if(Array.isArray(this.props.value)){let e=this.props.value.map(e=>n.a.createElement("code",null,e)).reduce((e,t)=>e.length?e.concat([", ",t]):[t],[]);return n.a.createElement("code",null,e)}return this.props.value}}class Me extends a.Component{constructor(e){super(e),this.handleClickTab=e=>{this.setState({activeTab:e}),d.set("tab",e)},this.state={activeTab:d.get("tab")||this.props.children[0].props.label}}render(){let e=this.props.children.map(e=>{let t=e.props.label;return n.a.createElement(Se,{active:this.state.activeTab===t,label:t,key:t,onClick:this.handleClickTab})}),t=this.props.children.find(e=>e.props.label===this.state.activeTab);return n.a.createElement("div",{className:"tab-view"},n.a.createElement("ol",{className:"tab-strip"},e),n.a.createElement("div",{className:"tab-content"},t))}}class Se extends a.Component{constructor(...e){super(...e),this.onClick=()=>{this.props.onClick(this.props.label)}}render(){return n.a.createElement("li",{className:"tab-label "+(this.props.active?"tab-active":""),onClick:this.onClick},this.props.label)}}var xe=se;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(n.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()})}],[[5,1,2]]]);
//# sourceMappingURL=main.ba04e957.chunk.js.map